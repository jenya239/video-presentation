<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            width: 100vw;
            height: 100vh;
            background: #000;
            overflow: hidden;
            font-family: 'Courier New', monospace;
        }

        #webgl-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            cursor: grab;
        }

        #webgl-canvas:active {
            cursor: grabbing;
        }

        .title {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 42px;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 20px #ffaa00;
            letter-spacing: 6px;
            z-index: 10;
        }

        .planet-list {
            position: absolute;
            top: 90px;
            left: 20px;
            background: rgba(0, 10, 20, 0.85);
            border: 2px solid #ffaa00;
            padding: 15px;
            border-radius: 8px;
            z-index: 10;
            max-width: 280px;
        }

        .list-title {
            font-size: 14px;
            color: #888;
            text-transform: uppercase;
            margin-bottom: 12px;
            text-align: center;
        }

        .planet-item {
            padding: 10px 15px;
            margin: 5px 0;
            background: rgba(255, 170, 0, 0.1);
            border-left: 3px solid #ffaa00;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            color: #fff;
        }

        .planet-item:hover {
            background: rgba(255, 170, 0, 0.3);
            transform: translateX(5px);
        }

        .planet-item.active {
            background: rgba(255, 170, 0, 0.4);
            border-left-color: #fff;
        }

        .overview-btn {
            width: 100%;
            padding: 12px;
            margin-top: 10px;
            background: rgba(0, 170, 255, 0.2);
            border: 2px solid #00aaff;
            color: #00aaff;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s;
            font-family: 'Courier New', monospace;
        }

        .overview-btn:hover {
            background: rgba(0, 170, 255, 0.4);
            transform: scale(1.05);
        }

        .info-box {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 10, 20, 0.85);
            border: 2px solid #ffaa00;
            padding: 20px;
            border-radius: 8px;
            z-index: 10;
            min-width: 300px;
            max-width: 400px;
        }

        .info-title {
            font-size: 20px;
            color: #ffaa00;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .info-text {
            font-size: 13px;
            color: #ccc;
            line-height: 1.6;
        }

        .stats {
            position: absolute;
            top: 90px;
            right: 20px;
            background: rgba(0, 10, 20, 0.85);
            border: 2px solid #00aaff;
            padding: 15px;
            border-radius: 8px;
            z-index: 10;
            min-width: 220px;
        }

        .stat-title {
            font-size: 12px;
            color: #888;
            text-transform: uppercase;
            margin-bottom: 12px;
            text-align: center;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .stat-label {
            color: #aaa;
        }

        .stat-value {
            color: #00aaff;
            font-weight: bold;
        }

        .controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 10, 20, 0.85);
            border: 2px solid #00aaff;
            padding: 12px 18px;
            border-radius: 8px;
            z-index: 10;
            color: #aaa;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <canvas id="webgl-canvas"></canvas>

    <div class="title">SOLAR SYSTEM</div>

    <div class="planet-list">
        <div class="list-title">Navigate</div>
        <div class="planet-item" data-planet="sun">‚òâ Sun</div>
        <div class="planet-item" data-planet="mercury">‚òø Mercury</div>
        <div class="planet-item" data-planet="venus">‚ôÄ Venus</div>
        <div class="planet-item" data-planet="earth">üú® Earth</div>
        <div class="planet-item" data-planet="mars">‚ôÇ Mars</div>
        <div class="planet-item" data-planet="jupiter">‚ôÉ Jupiter</div>
        <div class="planet-item" data-planet="saturn">‚ôÑ Saturn</div>
        <div class="planet-item" data-planet="uranus">‚ôÖ Uranus</div>
        <div class="planet-item" data-planet="neptune">‚ôÜ Neptune</div>
        <div class="planet-item" data-planet="pluto">‚ôá Pluto</div>
        <button class="overview-btn" id="overview-btn">‚ü≤ System Overview</button>
    </div>

    <div class="stats">
        <div class="stat-title">Scene Info</div>
        <div class="stat-row">
            <span class="stat-label">Real Stars:</span>
            <span class="stat-value">35</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">Background:</span>
            <span class="stat-value">12K</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">Planets:</span>
            <span class="stat-value">9</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">Real Comets:</span>
            <span class="stat-value">3</span>
        </div>
    </div>

    <div class="info-box" id="info-box">
        <div class="info-title">Solar System</div>
        <div class="info-text">
            Click on any planet to fly there and explore.<br><br>
            Our solar system formed 4.6 billion years ago from a giant molecular cloud.
        </div>
    </div>

    <div class="controls">
        üñ±Ô∏è Drag to rotate ‚Ä¢ Scroll to zoom
    </div>

    <script>
        const canvas = document.getElementById('webgl-canvas');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 20000);
        const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
        
        renderer.setSize(window.innerWidth, window.innerHeight);
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
        
        camera.position.set(0, 100, 250);
        camera.lookAt(0, 0, 0);

        const sunLight = new THREE.PointLight(0xffaa00, 2, 2000);
        scene.add(sunLight);

        const ambientLight = new THREE.AmbientLight(0x222222);
        scene.add(ambientLight);

        // –†–µ–∞–ª—å–Ω—ã–µ –∑–≤—ë–∑–¥—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ —è—Ä–∫–∏—Ö –∑–≤—ë–∑–¥ (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ —Å–≤.–≥–æ–¥–∞—Ö, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
        const realStars = [
            { name: 'Sirius', ra: 101.28, dec: -16.72, distance: 8.6, magnitude: -1.46, color: 0xaaddff },
            { name: 'Canopus', ra: 95.99, dec: -52.7, distance: 310, magnitude: -0.72, color: 0xffffdd },
            { name: 'Alpha Centauri', ra: 219.90, dec: -60.84, distance: 4.37, magnitude: -0.27, color: 0xffffaa },
            { name: 'Arcturus', ra: 213.91, dec: 19.18, distance: 37, magnitude: -0.05, color: 0xffaa66 },
            { name: 'Vega', ra: 279.23, dec: 38.78, distance: 25, magnitude: 0.03, color: 0xaaddff },
            { name: 'Capella', ra: 79.17, dec: 45.99, distance: 43, magnitude: 0.08, color: 0xffffaa },
            { name: 'Rigel', ra: 78.63, dec: -8.2, distance: 860, magnitude: 0.13, color: 0xaaccff },
            { name: 'Procyon', ra: 114.83, dec: 5.22, distance: 11.5, magnitude: 0.38, color: 0xffffcc },
            { name: 'Betelgeuse', ra: 88.79, dec: 7.41, distance: 550, magnitude: 0.5, color: 0xff6644 },
            { name: 'Altair', ra: 297.69, dec: 8.87, distance: 17, magnitude: 0.77, color: 0xffffff },
            { name: 'Aldebaran', ra: 68.98, dec: 16.51, distance: 65, magnitude: 0.85, color: 0xff8844 },
            { name: 'Spica', ra: 201.30, dec: -11.16, distance: 260, magnitude: 0.98, color: 0xaaddff },
            { name: 'Antares', ra: 247.35, dec: -26.43, distance: 550, magnitude: 1.06, color: 0xff4422 },
            { name: 'Pollux', ra: 116.33, dec: 28.03, distance: 34, magnitude: 1.14, color: 0xffaa66 },
            { name: 'Fomalhaut', ra: 344.41, dec: -29.62, distance: 25, magnitude: 1.16, color: 0xffffff },
            { name: 'Deneb', ra: 310.36, dec: 45.28, distance: 2600, magnitude: 1.25, color: 0xccddff },
            { name: 'Regulus', ra: 152.09, dec: 11.97, distance: 79, magnitude: 1.35, color: 0xaaddff },
            { name: 'Castor', ra: 113.65, dec: 31.89, distance: 52, magnitude: 1.58, color: 0xffffff },
            { name: 'Bellatrix', ra: 81.28, dec: 6.35, distance: 250, magnitude: 1.64, color: 0xaaddff },
            { name: 'Alnilam', ra: 84.05, dec: -1.20, distance: 2000, magnitude: 1.69, color: 0xaaddff },
            { name: 'Polaris', ra: 37.95, dec: 89.26, distance: 433, magnitude: 1.98, color: 0xffffcc },
            { name: 'Achernar', ra: 24.43, dec: -57.24, distance: 139, magnitude: 0.46, color: 0xaaddff },
            { name: 'Hadar', ra: 210.96, dec: -60.37, distance: 525, magnitude: 0.61, color: 0xaaddff },
            { name: 'Acrux', ra: 186.65, dec: -63.10, distance: 321, magnitude: 0.77, color: 0xaaddff },
            { name: 'Mimosa', ra: 191.93, dec: -59.69, distance: 353, magnitude: 1.25, color: 0xaaddff },
            { name: 'Shaula', ra: 263.40, dec: -37.10, distance: 570, magnitude: 1.62, color: 0xaaddff },
            { name: 'Gacrux', ra: 187.79, dec: -57.11, distance: 88, magnitude: 1.63, color: 0xff6644 },
            { name: 'Alnair', ra: 332.06, dec: -46.96, distance: 101, magnitude: 1.74, color: 0xaaddff },
            { name: 'Alioth', ra: 193.51, dec: 55.96, distance: 81, magnitude: 1.77, color: 0xffffff },
            { name: 'Dubhe', ra: 165.93, dec: 61.75, distance: 123, magnitude: 1.79, color: 0xffaa66 },
            { name: 'Mirfak', ra: 51.08, dec: 49.86, distance: 510, magnitude: 1.8, color: 0xffffcc },
            { name: 'Alkaid', ra: 206.89, dec: 49.31, distance: 101, magnitude: 1.86, color: 0xaaddff },
            { name: 'Mizar', ra: 200.98, dec: 54.93, distance: 78, magnitude: 2.04, color: 0xffffff },
            { name: 'Kochab', ra: 222.68, dec: 74.16, distance: 131, magnitude: 2.08, color: 0xffaa66 },
            { name: 'Alphard', ra: 141.90, dec: -8.66, distance: 177, magnitude: 1.98, color: 0xffaa66 },
        ];

        function createRealStarField() {
            const starGroup = new THREE.Group();
            const scale = 80; // –º–∞—Å—à—Ç–∞–± –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (1 —Å–≤.–≥–æ–¥ = 80 –µ–¥–∏–Ω–∏—Ü - –¥–∞–ª—å—à–µ!)
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –∑–≤—ë–∑–¥—ã
            realStars.forEach(star => {
                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (RA, Dec) –≤ –¥–µ–∫–∞—Ä—Ç–æ–≤—ã
                const raRad = star.ra * Math.PI / 180;
                const decRad = star.dec * Math.PI / 180;
                const dist = star.distance * scale;
                
                const x = dist * Math.cos(decRad) * Math.cos(raRad);
                const y = dist * Math.sin(decRad);
                const z = dist * Math.cos(decRad) * Math.sin(raRad);
                
                // –†–∞–∑–º–µ—Ä –º–µ–Ω—å—à–µ –∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —è—Ä–∫–æ—Å—Ç–∏
                const size = 0.8 + (2 - star.magnitude) * 0.15;
                
                const starGeometry = new THREE.SphereGeometry(Math.max(size, 0.4), 8, 8);
                const starMaterial = new THREE.MeshBasicMaterial({
                    color: star.color,
                    emissive: star.color,
                    emissiveIntensity: 1.2
                });
                const starMesh = new THREE.Mesh(starGeometry, starMaterial);
                starMesh.position.set(x, y, z);
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–≤–µ—á–µ–Ω–∏–µ –¥–ª—è —è—Ä–∫–∏—Ö –∑–≤—ë–∑–¥
                if (star.magnitude < 1.5) {
                    const glowGeometry = new THREE.SphereGeometry(size * 2.5, 8, 8);
                    const glowMaterial = new THREE.MeshBasicMaterial({
                        color: star.color,
                        transparent: true,
                        opacity: 0.4,
                        side: THREE.BackSide
                    });
                    const glow = new THREE.Mesh(glowGeometry, glowMaterial);
                    starMesh.add(glow);
                }
                
                starGroup.add(starMesh);
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª—É—á–∞–π–Ω—ã–µ –∑–≤—ë–∑–¥—ã –¥–ª—è –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏
            const randomStarGeometry = new THREE.BufferGeometry();
            const starCount = 12000; // –ë–æ–ª—å—à–µ –∑–≤—ë–∑–¥
            const positions = new Float32Array(starCount * 3);
            const colors = new Float32Array(starCount * 3);
            const sizes = new Float32Array(starCount);
            
            for (let i = 0; i < starCount; i++) {
                const i3 = i * 3;
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos(2 * Math.random() - 1);
                const distance = 8000 + Math.random() * 15000; // –î–∞–ª—å—à–µ
                
                positions[i3] = distance * Math.sin(phi) * Math.cos(theta);
                positions[i3 + 1] = distance * Math.cos(phi);
                positions[i3 + 2] = distance * Math.sin(phi) * Math.sin(theta);
                
                const rand = Math.random();
                if (rand < 0.7) {
                    colors[i3] = 0.9 + Math.random() * 0.1;
                    colors[i3 + 1] = 0.9 + Math.random() * 0.1;
                    colors[i3 + 2] = 0.8 + Math.random() * 0.2;
                } else if (rand < 0.85) {
                    colors[i3] = 1.0;
                    colors[i3 + 1] = 0.5 + Math.random() * 0.3;
                    colors[i3 + 2] = 0.3 + Math.random() * 0.2;
                } else {
                    colors[i3] = 0.7 + Math.random() * 0.2;
                    colors[i3 + 1] = 0.8 + Math.random() * 0.2;
                    colors[i3 + 2] = 1.0;
                }
                
                sizes[i] = 0.2 + Math.random() * 0.8; // –ú–µ–Ω—å—à–µ
            }
            
            randomStarGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            randomStarGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            randomStarGeometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));
            
            const randomStarMaterial = new THREE.PointsMaterial({
                size: 0.8, // –ú–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä
                vertexColors: true,
                transparent: true,
                opacity: 0.8, // –Ø—Ä—á–µ
                blending: THREE.AdditiveBlending,
                sizeAttenuation: true
            });
            
            const randomStars = new THREE.Points(randomStarGeometry, randomStarMaterial);
            starGroup.add(randomStars);
            
            return starGroup;
        }

        scene.add(createRealStarField());

        // –°–æ–ª–Ω—Ü–µ
        const sunGeometry = new THREE.SphereGeometry(5, 32, 32);
        const sunMaterial = new THREE.MeshBasicMaterial({ 
            color: 0xffaa00,
            emissive: 0xffaa00
        });
        const sun = new THREE.Mesh(sunGeometry, sunMaterial);
        scene.add(sun);

        const glowGeometry = new THREE.SphereGeometry(7, 32, 32);
        const glowMaterial = new THREE.MeshBasicMaterial({
            color: 0xffaa00,
            transparent: true,
            opacity: 0.3,
            side: THREE.BackSide
        });
        const glow = new THREE.Mesh(glowGeometry, glowMaterial);
        scene.add(glow);

        // –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–π —Ç–µ–∫—Å—Ç—É—Ä—ã
        function createPlanetTexture(baseColor, detailColor, size = 256) {
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');
            
            // –ë–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
            const gradient = ctx.createRadialGradient(size/2, size/2, 0, size/2, size/2, size/2);
            gradient.addColorStop(0, `#${baseColor.toString(16).padStart(6, '0')}`);
            const darkerBase = Math.max(0, baseColor - 0x303030);
            gradient.addColorStop(1, `#${darkerBase.toString(16).padStart(6, '0')}`);
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, size, size);
            
            // –ö—Ä—É–ø–Ω—ã–µ –ø—è—Ç–Ω–∞
            for (let i = 0; i < 20; i++) {
                const x = Math.random() * size;
                const y = Math.random() * size;
                const r = 10 + Math.random() * 25;
                const grad = ctx.createRadialGradient(x, y, 0, x, y, r);
                grad.addColorStop(0, `#${detailColor.toString(16).padStart(6, '0')}`);
                grad.addColorStop(1, 'transparent');
                ctx.fillStyle = grad;
                ctx.globalAlpha = 0.3 + Math.random() * 0.4;
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // –ú–µ–ª–∫–∏–µ –¥–µ—Ç–∞–ª–∏
            for (let i = 0; i < 1500; i++) {
                const x = Math.random() * size;
                const y = Math.random() * size;
                const r = Math.random() * 2;
                const colorVariation = detailColor + Math.floor((Math.random() - 0.5) * 0x404040);
                ctx.fillStyle = `#${Math.max(0, colorVariation).toString(16).padStart(6, '0')}`;
                ctx.globalAlpha = Math.random() * 0.6;
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.fill();
            }
            
            const texture = new THREE.CanvasTexture(canvas);
            return texture;
        }

        // –î–∞–Ω–Ω—ã–µ –ø–ª–∞–Ω–µ—Ç —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏ —Ü–≤–µ—Ç–∞–º–∏
        const planetsData = [
            { name: 'mercury', distance: 5.79, size: 0.3, baseColor: 0x8c8c8c, detailColor: 0x5a5a5a, speed: 4.09, tilt: 7.0, axialTilt: 0.034 },
            { name: 'venus', distance: 10.82, size: 0.75, baseColor: 0xe0c8a0, detailColor: 0xc8b090, speed: 1.62, tilt: 3.4, axialTilt: 177.4 },
            { name: 'earth', distance: 14.96, size: 0.8, baseColor: 0x1e90ff, detailColor: 0x228b22, speed: 1.0, tilt: 0.0, axialTilt: 23.4, moons: 1, moonColor: 0xc0c0c0 },
            { name: 'mars', distance: 22.79, size: 0.42, baseColor: 0xc85a3c, detailColor: 0x8b3a1a, speed: 0.53, tilt: 1.9, axialTilt: 25.2, moons: 2, moonColor: 0x7a6a5a },
            { name: 'jupiter', distance: 77.86, size: 4.5, baseColor: 0xc8a880, detailColor: 0xa88860, speed: 0.084, tilt: 1.3, axialTilt: 3.1, moons: 4, bands: true, moonColor: 0xd0c8b8 },
            { name: 'saturn', distance: 143.0, size: 3.8, baseColor: 0xe0d0b0, detailColor: 0xc8b898, speed: 0.034, tilt: 2.5, axialTilt: 26.7, moons: 3, rings: true, moonColor: 0xb8b0a0 },
            { name: 'uranus', distance: 287.0, size: 2.0, baseColor: 0x70d8e8, detailColor: 0x50b8c8, speed: 0.012, tilt: 0.8, axialTilt: 97.8 },
            { name: 'neptune', distance: 450.0, size: 1.95, baseColor: 0x5080e0, detailColor: 0x3060c0, speed: 0.006, tilt: 1.8, axialTilt: 28.3 },
            { name: 'pluto', distance: 590.0, size: 0.18, baseColor: 0xb8a090, detailColor: 0x988070, speed: 0.004, tilt: 17.2, axialTilt: 122.5 }
        ];

        const planets = [];
        const moons = [];

        planetsData.forEach(data => {
            // –û—Ä–±–∏—Ç–∞
            const orbitGeometry = new THREE.BufferGeometry();
            const orbitPoints = [];
            for (let i = 0; i <= 128; i++) {
                const angle = (i / 128) * Math.PI * 2;
                const x = Math.cos(angle) * data.distance;
                const z = Math.sin(angle) * data.distance;
                const y = Math.sin(angle) * data.distance * Math.sin(data.tilt * Math.PI / 180) * 0.3;
                orbitPoints.push(new THREE.Vector3(x, y, z));
            }
            orbitGeometry.setFromPoints(orbitPoints);
            const orbit = new THREE.Line(orbitGeometry, 
                new THREE.LineBasicMaterial({ color: 0x444444, transparent: true, opacity: 0.3 })
            );
            scene.add(orbit);
            
            // –ü–ª–∞–Ω–µ—Ç–∞ —Å –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–π —Ç–µ–∫—Å—Ç—É—Ä–æ–π
            const planetGeometry = new THREE.SphereGeometry(data.size, 32, 32);
            const texture = createPlanetTexture(data.baseColor, data.detailColor);
            const planetMaterial = new THREE.MeshStandardMaterial({ 
                map: texture,
                emissive: data.baseColor,
                emissiveIntensity: 0.05,
                roughness: 0.8,
                metalness: 0.1
            });
            
            const planet = new THREE.Mesh(planetGeometry, planetMaterial);
            planet.rotation.z = data.axialTilt * Math.PI / 180;
            scene.add(planet);
            
            // –ö–æ–ª—å—Ü–∞ –°–∞—Ç—É—Ä–Ω–∞
            let rings = null;
            if (data.rings) {
                const ringGeometry = new THREE.RingGeometry(data.size * 1.5, data.size * 2.5, 64);
                const ringMaterial = new THREE.MeshBasicMaterial({
                    color: 0xfad5a5,
                    side: THREE.DoubleSide,
                    transparent: true,
                    opacity: 0.6
                });
                rings = new THREE.Mesh(ringGeometry, ringMaterial);
                rings.rotation.x = Math.PI / 2;
                planet.add(rings);
            }
            
            // –°–ø—É—Ç–Ω–∏–∫–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ü–≤–µ—Ç–∞–º–∏
            if (data.moons) {
                for (let m = 0; m < data.moons; m++) {
                    const moonSize = data.size * 0.15;
                    const moonDistance = data.size * (2 + m * 0.8);
                    const moonGeometry = new THREE.SphereGeometry(moonSize, 16, 16);
                    
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ü–≤–µ—Ç –∏–∑ –¥–∞–Ω–Ω—ã—Ö –ø–ª–∞–Ω–µ—Ç—ã –∏–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤–∞—Ä–∏–∞—Ü–∏—é
                    const baseMoonColor = data.moonColor || 0x888888;
                    const moonTexture = createPlanetTexture(baseMoonColor, baseMoonColor - 0x202020);
                    
                    const moonMaterial = new THREE.MeshStandardMaterial({ 
                        map: moonTexture,
                        emissive: baseMoonColor,
                        emissiveIntensity: 0.02,
                        roughness: 0.95,
                        metalness: 0.05
                    });
                    const moon = new THREE.Mesh(moonGeometry, moonMaterial);
                    
                    moons.push({
                        mesh: moon,
                        planet: planet,
                        distance: moonDistance,
                        speed: 1 + m * 0.5,
                        angle: Math.random() * Math.PI * 2
                    });
                    
                    scene.add(moon);
                }
            }
            
            planets.push({
                mesh: planet,
                distance: data.distance,
                speed: data.speed,
                angle: Math.random() * Math.PI * 2,
                tilt: data.tilt,
                name: data.name,
                rings: rings
            });
        });

        // –†–µ–∞–ª—å–Ω—ã–µ –∫–æ–º–µ—Ç—ã —Å –Ω–∞—Å—Ç–æ—è—â–∏–º–∏ –æ—Ä–±–∏—Ç–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
        const cometsData = [
            { 
                name: "Halley's Comet",
                semiMajor: 270, // ~18 AU –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–Ω–æ
                eccentricity: 0.967,
                inclination: 162.3,
                speed: 0.013,
                angle: Math.random() * Math.PI * 2
            },
            { 
                name: "Comet Encke",
                semiMajor: 33, // ~2.2 AU –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–Ω–æ  
                eccentricity: 0.847,
                inclination: 11.8,
                speed: 0.3,
                angle: Math.random() * Math.PI * 2
            },
            { 
                name: "Hale-Bopp",
                semiMajor: 420, // –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ
                eccentricity: 0.995,
                inclination: 89.4,
                speed: 0.004,
                angle: Math.random() * Math.PI * 2
            }
        ];

        const comets = [];
        cometsData.forEach((data, i) => {
            const cometGeometry = new THREE.SphereGeometry(0.25, 16, 16);
            const cometMaterial = new THREE.MeshBasicMaterial({ 
                color: 0xccddff,
                emissive: 0xccddff,
                emissiveIntensity: 0.6
            });
            const comet = new THREE.Mesh(cometGeometry, cometMaterial);
            
            const tailGeometry = new THREE.ConeGeometry(0.4, 10, 8);
            const tailMaterial = new THREE.MeshBasicMaterial({
                color: 0xaaddff,
                transparent: true,
                opacity: 0.25
            });
            const tail = new THREE.Mesh(tailGeometry, tailMaterial);
            tail.rotation.x = Math.PI / 2;
            tail.position.z = -5;
            comet.add(tail);
            
            scene.add(comet);
            
            comets.push({
                mesh: comet,
                name: data.name,
                semiMajor: data.semiMajor,
                eccentricity: data.eccentricity,
                inclination: data.inclination,
                speed: data.speed,
                angle: data.angle
            });
        });

        // –ö–∞–º–µ—Ä–∞ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
        let cameraState = {
            mode: 'overview',
            target: null,
            position: { x: 0, y: 100, z: 250 },
            lookAt: { x: 0, y: 0, z: 0 },
            transitionProgress: 1
        };

        let cameraControl = {
            isDragging: false,
            previousMouse: { x: 0, y: 0 },
            angle: { theta: 0, phi: Math.PI / 4 },
            distance: 250
        };

        function flyToTarget(targetName) {
            let targetObj = null;
            let distance = 30;
            
            if (targetName === 'sun') {
                targetObj = sun;
                distance = 20;
            } else {
                const planet = planets.find(p => p.name === targetName);
                if (planet) {
                    targetObj = planet.mesh;
                    distance = Math.max(planet.distance * 0.15, planet.mesh.geometry.parameters.radius * 5);
                }
            }
            
            if (targetObj) {
                cameraState.mode = 'transition';
                cameraState.target = targetObj;
                cameraState.targetDistance = distance;
                cameraState.transitionProgress = 0;
                cameraState.startPos = { ...camera.position };
                
                document.querySelectorAll('.planet-item').forEach(el => el.classList.remove('active'));
                document.querySelector(`[data-planet="${targetName}"]`)?.classList.add('active');
                
                updateInfoBox(targetName);
            }
        }

        function returnToOverview() {
            cameraState.mode = 'transition';
            cameraState.target = null;
            cameraState.transitionProgress = 0;
            cameraState.startPos = { ...camera.position };
            cameraControl.distance = 250;
            
            document.querySelectorAll('.planet-item').forEach(el => el.classList.remove('active'));
            updateInfoBox('overview');
        }

        function updateInfoBox(target) {
            const info = {
                sun: { title: 'Sun', text: 'The Sun is a G-type main-sequence star. It contains 99.86% of the mass in the Solar System. Surface temperature: 5,500¬∞C. Distance shown to brightest stars like Sirius (8.6 ly) and Alpha Centauri (4.37 ly).' },
                mercury: { title: 'Mercury', text: 'Smallest planet. No atmosphere. Temperature range: -173¬∞C to 427¬∞C. Heavily cratered surface. Orbital inclination: 7¬∞.' },
                venus: { title: 'Venus', text: 'Hottest planet (462¬∞C). Thick CO‚ÇÇ atmosphere. Rotates backwards. Volcanic surface. Orbital inclination: 3.4¬∞.' },
                earth: { title: 'Earth', text: 'Only known planet with life. 71% water surface. One natural satellite (Moon). Protective atmosphere. Orbital plane is reference (0¬∞).' },
                mars: { title: 'Mars', text: 'Red planet due to iron oxide. Two small moons (Phobos & Deimos). Evidence of ancient water. Orbital inclination: 1.9¬∞.' },
                jupiter: { title: 'Jupiter', text: 'Largest planet. Gas giant. Great Red Spot storm. 79 known moons (4 major shown). Strong magnetic field. Orbital inclination: 1.3¬∞.' },
                saturn: { title: 'Saturn', text: 'Famous rings made of ice and rock. Gas giant. 82 known moons. Lowest density of all planets. Orbital inclination: 2.5¬∞.' },
                uranus: { title: 'Uranus', text: 'Ice giant. Tilted 97¬∞ on its side. Blue-green due to methane. 27 known moons. Orbital inclination: 0.8¬∞.' },
                neptune: { title: 'Neptune', text: 'Farthest major planet. Ice giant. Strongest winds in solar system (2,100 km/h). 14 known moons. Orbital inclination: 1.8¬∞.' },
                pluto: { title: 'Pluto (dwarf planet)', text: 'Dwarf planet in Kuiper belt. Heart-shaped Tombaugh Regio. Moon Charon. Highly eccentric orbit. Orbital inclination: 17.2¬∞ (most tilted!).' },
                overview: { title: 'Solar System', text: 'Click on any planet to fly there. Real stars visible: Sirius, Canopus, Alpha Centauri, Vega, Arcturus, and 45+ more from star catalog.<br><br>Distances and orbits shown to scale (compressed).' }
            };
            
            const data = info[target] || info.overview;
            document.querySelector('.info-title').textContent = data.title;
            document.querySelector('.info-text').innerHTML = data.text;
        }

        document.querySelectorAll('.planet-item').forEach(item => {
            item.addEventListener('click', () => {
                flyToTarget(item.dataset.planet);
            });
        });

        document.getElementById('overview-btn').addEventListener('click', returnToOverview);

        canvas.addEventListener('mousedown', (e) => {
            cameraControl.isDragging = true;
            cameraControl.previousMouse = { x: e.clientX, y: e.clientY };
        });

        canvas.addEventListener('mousemove', (e) => {
            if (cameraControl.isDragging && cameraState.mode === 'overview') {
                const deltaX = e.clientX - cameraControl.previousMouse.x;
                const deltaY = e.clientY - cameraControl.previousMouse.y;
                
                cameraControl.angle.theta += deltaX * 0.005;
                cameraControl.angle.phi += deltaY * 0.005;
                cameraControl.angle.phi = Math.max(0.1, Math.min(Math.PI - 0.1, cameraControl.angle.phi));
                
                cameraControl.previousMouse = { x: e.clientX, y: e.clientY };
            }
        });

        canvas.addEventListener('mouseup', () => {
            cameraControl.isDragging = false;
        });

        canvas.addEventListener('wheel', (e) => {
            e.preventDefault();
            cameraControl.distance += e.deltaY * 0.1;
            cameraControl.distance = Math.max(50, Math.min(1000, cameraControl.distance));
        });

        let time = 0;
        
        function animate() {
            requestAnimationFrame(animate);
            
            time += 0.001;
            
            sun.rotation.y += 0.001;
            glow.rotation.y -= 0.0005;
            const pulse = 1 + Math.sin(time * 2) * 0.05;
            glow.scale.set(pulse, pulse, pulse);
            
            planets.forEach(planet => {
                planet.angle += planet.speed * 0.001;
                const x = Math.cos(planet.angle) * planet.distance;
                const z = Math.sin(planet.angle) * planet.distance;
                const y = Math.sin(planet.angle) * planet.distance * Math.sin(planet.tilt * Math.PI / 180) * 0.3;
                
                planet.mesh.position.set(x, y, z);
                planet.mesh.rotation.y += 0.01;
                
                if (planet.rings) {
                    planet.rings.rotation.z += 0.001;
                }
            });
            
            moons.forEach(moon => {
                moon.angle += moon.speed * 0.005; // –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –≤ 4 —Ä–∞–∑–∞
                const x = Math.cos(moon.angle) * moon.distance;
                const z = Math.sin(moon.angle) * moon.distance;
                moon.mesh.position.copy(moon.planet.position);
                moon.mesh.position.x += x;
                moon.mesh.position.z += z;
            });
            
            comets.forEach(comet => {
                comet.angle += comet.speed * 0.001;
                // –†–µ–∞–ª—å–Ω–∞—è —ç–ª–ª–∏–ø—Ç–∏—á–µ—Å–∫–∞—è –æ—Ä–±–∏—Ç–∞: r = a(1-e¬≤)/(1+e*cos(Œ∏))
                const r = comet.semiMajor * (1 - comet.eccentricity * comet.eccentricity) / 
                          (1 + comet.eccentricity * Math.cos(comet.angle));
                const x = Math.cos(comet.angle) * r;
                const z = Math.sin(comet.angle) * r;
                const y = Math.sin(comet.angle) * r * Math.sin(comet.inclination * Math.PI / 180) * 0.4;
                
                comet.mesh.position.set(x, y, z);
                comet.mesh.lookAt(0, 0, 0);
            });
            
            if (cameraState.mode === 'transition') {
                cameraState.transitionProgress += 0.02;
                if (cameraState.transitionProgress >= 1) {
                    cameraState.mode = cameraState.target ? 'focus' : 'overview';
                    cameraState.transitionProgress = 1;
                }
                
                const t = cameraState.transitionProgress;
                const eased = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;
                
                if (cameraState.target) {
                    const targetPos = cameraState.target.position;
                    const offset = cameraState.targetDistance;
                    camera.position.x = cameraState.startPos.x + (targetPos.x + offset - cameraState.startPos.x) * eased;
                    camera.position.y = cameraState.startPos.y + (targetPos.y + offset * 0.5 - cameraState.startPos.y) * eased;
                    camera.position.z = cameraState.startPos.z + (targetPos.z + offset - cameraState.startPos.z) * eased;
                    camera.lookAt(targetPos);
                } else {
                    camera.position.x = cameraState.startPos.x + (0 - cameraState.startPos.x) * eased;
                    camera.position.y = cameraState.startPos.y + (100 - cameraState.startPos.y) * eased;
                    camera.position.z = cameraState.startPos.z + (250 - cameraState.startPos.z) * eased;
                    camera.lookAt(0, 0, 0);
                }
            } else if (cameraState.mode === 'focus' && cameraState.target) {
                const targetPos = cameraState.target.position;
                const offset = cameraState.targetDistance;
                const angle = time * 0.3;
                camera.position.x = targetPos.x + Math.cos(angle) * offset;
                camera.position.y = targetPos.y + offset * 0.5;
                camera.position.z = targetPos.z + Math.sin(angle) * offset;
                camera.lookAt(targetPos);
            } else {
                camera.position.x = cameraControl.distance * Math.sin(cameraControl.angle.phi) * Math.cos(cameraControl.angle.theta);
                camera.position.y = cameraControl.distance * Math.cos(cameraControl.angle.phi);
                camera.position.z = cameraControl.distance * Math.sin(cameraControl.angle.phi) * Math.sin(cameraControl.angle.theta);
                camera.lookAt(0, 0, 0);
            }
            
            renderer.render(scene, camera);
        }
        
        animate();
    </script>
</body>
</html>
